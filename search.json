[{"path":"https://acastroaraujo.github.io/seaR/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 seaR authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://acastroaraujo.github.io/seaR/articles/01-simulation.html","id":"simple-random-mixing-model","dir":"Articles","previous_headings":"","what":"Simple Random Mixing Model","title":"Why is SEA important?","text":"Let’s start simple model two gender identities, three occupational identities, group sizes ranging 1 10. store individual identities risk set vector named identities. assume following marginal probabilities: Note. normally estimate joint probabilities dataset instead assuming independent. Note event probabilities sum one condition group size. (See definitions).","code":"gender <- c(\"M\", \"F\") occupation <- c(\"A\", \"B\", \"C\", \"D\") risk_set_size(1:10, gender, occupation) ## Total: 43,757 ##     1     2     3     4     5     6     7     8     9    10  ##     8    36   120   330   792  1716  3432  6435 11440 19448 rs <- risk_set(1:10, gender, occupation) glimpse(rs) ## Rows: 43,757 ## Columns: 2 ## $ .id   <chr> \"MA\", \"FA\", \"MB\", \"FB\", \"MC\", \"FC\", \"MD\", \"FD\", \"MA|MA\", \"FA|MA\"… ## $ .size <int> 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2… identities <- get_identities(rs) identities ## [1] \"MA\" \"FA\" \"MB\" \"FB\" \"MC\" \"FC\" \"MD\" \"FD\" p1 <- c(\"M\" = 0.7, \"F\" = 0.3) p2 <- c(\"A\" = 0.2, \"B\" = 0.3, \"C\" = 0.4, D = 0.1) jp <- outer(p1, p2) ## joint probabilities under independence  probs <- vector(\"double\", length(jp))  for (i in seq_along(probs)) {   probs[[i]] <- as.vector(jp)[[i]] }  names(probs) <- identities  ## calculate event probabilities, here given as log(p) rs$lp <- event_probs(rs, identities, probs = probs, log = TRUE) jp ##      A    B    C    D ## M 0.14 0.21 0.28 0.07 ## F 0.06 0.09 0.12 0.03 probs ##   MA   FA   MB   FB   MC   FC   MD   FD  ## 0.14 0.06 0.21 0.09 0.28 0.12 0.07 0.03 glimpse(rs) ## Rows: 43,757 ## Columns: 3 ## $ .id   <chr> \"MA\", \"FA\", \"MB\", \"FB\", \"MC\", \"FC\", \"MD\", \"FD\", \"MA|MA\", \"FA|MA\"… ## $ .size <int> 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2… ## $ lp    <eprobs> -1.966113, -2.813411, -1.560648, -2.407946, -1.272966, -2.120… rs |>    group_by(.size) |>    summarize(p = exp(log_sum_exp(lp))) ## # A tibble: 10 × 2 ##    .size     p ##    <int> <dbl> ##  1     1  1    ##  2     2  1    ##  3     3  1    ##  4     4  1    ##  5     5  1    ##  6     6  1.00 ##  7     7  1.00 ##  8     8  1.00 ##  9     9  1    ## 10    10  1.00"},{"path":"https://acastroaraujo.github.io/seaR/articles/01-simulation.html","id":"model-parameters","dir":"Articles","previous_headings":"Simple Random Mixing Model","what":"Model Parameters","title":"Why is SEA important?","text":"Now simulate observations following model: \\[ \\begin{align} N_i &\\sim \\text{Poisson}(\\lambda_i) \\\\\\\\ \\log(\\lambda_i) &= 6 + \\underbrace{\\log(p_i)}_\\text{offset} \\end{align} \\] Among things, model implies “group size” gets roughly number counts—.e., ’s regression coefficient incorporates group size. also keep mind larger group size make event probability smaller —importantly—see zeroes larger group sizes reason.  Risk set: Observed risk set: Now ready see can recover known parameters data.","code":"d <- rs |>    ## simulate data from known parameters   mutate(s = rpois(n(), exp(6 + lp))) d |>    summarize(obs = sum(s), .by = .size) ## # A tibble: 10 × 2 ##    .size   obs ##    <int> <int> ##  1     1   391 ##  2     2   405 ##  3     3   412 ##  4     4   422 ##  5     5   449 ##  6     6   397 ##  7     7   418 ##  8     8   399 ##  9     9   403 ## 10    10   385 nrow(d) ## [1] 43757 mean(d$s > 0) * nrow(d) ## [1] 2104"},{"path":"https://acastroaraujo.github.io/seaR/articles/01-simulation.html","id":"results-missing-data","dir":"Articles","previous_headings":"Simple Random Mixing Model","what":"Results (Missing Data)","title":"Why is SEA important?","text":"Results using groups actually form (.e., zeroes). Incomplete Risk Set (Missing Data)","code":"d_sub <- filter(d, s > 0)  m1 <- glm(s ~ 1, family = \"poisson\", data = d_sub) m2 <- glm(s ~ 1 + .size, family = \"poisson\", data = d_sub) m3 <- glm(s ~ 1, family = \"poisson\", data = d_sub, offset = lp) m4 <- glm(s ~ 1 + .size, family = \"poisson\", data = d_sub, offset = lp)  modelsummary::msummary(   models = list(m1, m2, m3, m4),    stars = TRUE,    gof_map = c(\"nobs\", \"aic\", \"bic\"),   notes = \"Models 1-2 don't include offset term. Model 3 is correctly specified.\",    title = \"Incomplete Risk Set (Missing Data)\",    output = \"gt\" ) |> gt::opt_table_font(\"Avenir Next\")"},{"path":"https://acastroaraujo.github.io/seaR/articles/01-simulation.html","id":"results-complete-data","dir":"Articles","previous_headings":"Simple Random Mixing Model","what":"Results (Complete Data)","title":"Why is SEA important?","text":"Results using possible groups. Complete Risk Set Technical Discussion. standard errors super small, makes suspicious apply statistical significance framework context. don’t understand ’s effect group size using incomplete risk set adjusting event probabilities (model 4). effect group size \\(N\\) operate via event probabilities.","code":"m1 <- glm(s ~ 1, family = \"poisson\", data = d) m2 <- glm(s ~ 1 + .size, family = \"poisson\", data = d) m3 <- glm(s ~ 1, family = \"poisson\", data = d, offset = lp) m4 <- glm(s ~ 1 + .size, family = \"poisson\", data = d, offset = lp)  modelsummary::msummary(   models = list(m1, m2, m3, m4),    stars = TRUE,    gof_map = c(\"nobs\", \"aic\", \"bic\"),   notes = \"Models 1-2 don't include offset term. Model 3 is correctly specified.\",    title = \"Complete Risk Set\",    output = \"gt\" ) |> gt::opt_table_font(\"Avenir Next\")"},{"path":[]},{"path":"https://acastroaraujo.github.io/seaR/articles/01-simulation.html","id":"model-parameters-1","dir":"Articles","previous_headings":"Group Size Predictor","what":"Model Parameters","title":"Why is SEA important?","text":"Now simulate observations following model: \\[ \\begin{align} N_i &\\sim \\text{Poisson}(\\lambda_i) \\\\\\\\ \\log(\\lambda_i) &= 6 - 0.2 \\cdot \\text{size}_i + \\underbrace{\\log(p_i)}_\\text{offset} \\end{align} \\] Among things, model implies “group size” gets roughly 18% less number counts additional increase size. Note. means also get much missing data (.e., events 0 counts). Risk set: Observed risk set: Now ready see can recover known parameters data.","code":"d <- rs |>    ## simulate data from known parameters   mutate(s = rpois(n(), exp(6 + -0.2*.size + lp))) d |>    summarize(obs = sum(s), .by = .size) ## # A tibble: 10 × 2 ##    .size   obs ##    <int> <int> ##  1     1   305 ##  2     2   267 ##  3     3   228 ##  4     4   199 ##  5     5   156 ##  6     6   122 ##  7     7   115 ##  8     8    73 ##  9     9    66 ## 10    10    49 nrow(d) ## [1] 43757 mean(d$s > 0) * nrow(d) ## [1] 734"},{"path":"https://acastroaraujo.github.io/seaR/articles/01-simulation.html","id":"results-missing-data-1","dir":"Articles","previous_headings":"Group Size Predictor","what":"Results (Missing Data)","title":"Why is SEA important?","text":"Results using groups actually form (.e., zeroes). Incomplete Risk Set (Missing Data)","code":"d_sub <- filter(d, s > 0)  m1 <- glm(s ~ 1, family = \"poisson\", data = d_sub) m2 <- glm(s ~ 1 + .size, family = \"poisson\", data = d_sub) m3 <- glm(s ~ 1, family = \"poisson\", data = d_sub, offset = lp) m4 <- glm(s ~ 1 + .size, family = \"poisson\", data = d_sub, offset = lp)  modelsummary::msummary(   models = list(m1, m2, m3, m4),    stars = TRUE,    gof_map = c(\"nobs\", \"aic\", \"bic\"),   notes = \"Models 1-2 don't include offset term. Model 4 is correctly specified.\",    title = \"Incomplete Risk Set (Missing Data)\",    output = \"gt\" ) |> gt::opt_table_font(\"Avenir Next\")"},{"path":"https://acastroaraujo.github.io/seaR/articles/01-simulation.html","id":"results-complete-data-1","dir":"Articles","previous_headings":"Group Size Predictor","what":"Results (Complete Data)","title":"Why is SEA important?","text":"Results using possible groups. Complete Risk Set","code":"m1 <- glm(s ~ 1, family = \"poisson\", data = d) m2 <- glm(s ~ 1 + .size, family = \"poisson\", data = d) m3 <- glm(s ~ 1, family = \"poisson\", data = d, offset = lp) m4 <- glm(s ~ 1 + .size, family = \"poisson\", data = d, offset = lp)  modelsummary::msummary(   models = list(m1, m2, m3, m4),    stars = TRUE,    gof_map = c(\"nobs\", \"aic\", \"bic\"),   notes = \"Models 1-2 don't include offset term. Model 3 is correctly specified.\",    title = \"Complete Risk Set\",    output = \"gt\" ) |> gt::opt_table_font(\"Avenir Next\")"},{"path":[]},{"path":"https://acastroaraujo.github.io/seaR/articles/01-simulation.html","id":"model-parameters-2","dir":"Articles","previous_headings":"Group Size & Diversity Predictors","what":"Model Parameters","title":"Why is SEA important?","text":"Now simulate observations following model: \\[ \\begin{align} N_i &\\sim \\text{Poisson}(\\lambda_i) \\\\\\\\ \\log(\\lambda_i) &= 7 - 0.2 \\cdot \\text{size}_i + 0.3 \\cdot \\text{od}_i - 0.5 \\cdot \\text{gd}_i + \\underbrace{\\log(p_i)}_\\text{offset} \\end{align} \\] presumes whatever expect less groups gender diversity (groups gender homophily) groups occupational diversity (less groups occupational homophily). seaR package includes function called H() calculates Shannon’s entropy measurement, also common measurement diversity ecological literature. get sense means, following plot takes random sample groups shows corresponding measures diversity.  Risk set: Observed risk set: Now ready see can recover known parameters data.","code":"rs$gender_div <- H(rs, gender) rs$occupation_div <- H(rs, occupation)  d <- rs |>    ## simulate data from known parameters   mutate(s = rpois(n(), exp(7 - 0.2*.size + 0.3*occupation_div - 0.5*gender_div + lp))) nrow(d) ## [1] 43757 mean(d$s > 0) * nrow(d) ## [1] 1544"},{"path":"https://acastroaraujo.github.io/seaR/articles/01-simulation.html","id":"results-missing-data-2","dir":"Articles","previous_headings":"Group Size & Diversity Predictors","what":"Results (Missing Data)","title":"Why is SEA important?","text":"Results using groups actually form (.e., zeroes). Incomplete Risk Set (Missing Data) || OFFSET Incomplete Risk Set (Missing Data) || INCLUDING OFFSET","code":"d_sub <- filter(d, s > 0)  m1 <- glm(s ~ 1, family = \"poisson\", data = d_sub) m2 <- glm(s ~ .size, family = \"poisson\", data = d_sub) m3 <- glm(s ~ .size + occupation_div, family = \"poisson\", data = d_sub) m4 <- glm(s ~ .size + gender_div, family = \"poisson\", data = d_sub) m5 <- glm(s ~ .size + occupation_div + gender_div, family = \"poisson\", data = d_sub)  modelsummary::msummary(   models = list(m1, m2, m3, m4, m5),    stars = TRUE,    gof_map = c(\"nobs\", \"aic\", \"bic\"),   notes = \"Models 1-2 don't include offset term. Model 5 is correctly specified.\",    title = \"Incomplete Risk Set (Missing Data) || NO OFFSET\",    output = \"gt\" ) |> gt::opt_table_font(\"Avenir Next\") m1 <- glm(s ~ 1, family = \"poisson\", data = d_sub, offset = lp) m2 <- glm(s ~ .size, family = \"poisson\", data = d_sub, offset = lp) m3 <- glm(s ~ .size + occupation_div, family = \"poisson\", data = d_sub, offset = lp) m4 <- glm(s ~ .size + gender_div, family = \"poisson\", data = d_sub, offset = lp) m5 <- glm(s ~ .size + occupation_div + gender_div, family = \"poisson\", data = d_sub, offset = lp)  modelsummary::msummary(   models = list(m1, m2, m3, m4, m5),    stars = TRUE,    gof_map = c(\"nobs\", \"aic\", \"bic\"),   notes = \"Models 1-2 don't include offset term. Model 5 is correctly specified.\",    title = \"Incomplete Risk Set (Missing Data) || INCLUDING OFFSET\",    output = \"gt\" ) |> gt::opt_table_font(\"Avenir Next\")"},{"path":"https://acastroaraujo.github.io/seaR/articles/01-simulation.html","id":"results-complete-data-2","dir":"Articles","previous_headings":"Group Size & Diversity Predictors","what":"Results (Complete Data)","title":"Why is SEA important?","text":"Results using possible groups. Complete Risk Set Technical Discussion. standard errors super small, makes suspicious apply statistical significance framework context. : Simulate massive risk set (millions events) Use simulation get real sampling distributions coefficients compare usual standard error.","code":"m1 <- glm(s ~ 1, family = \"poisson\", data = d) m2 <- glm(s ~ .size, family = \"poisson\", data = d) m3 <- glm(s ~ .size + occupation_div, family = \"poisson\", data = d, offset = lp) m4 <- glm(s ~ .size + gender_div, family = \"poisson\", data = d, offset = lp) m5 <- glm(s ~ .size + occupation_div + gender_div, family = \"poisson\", data = d, offset = lp)  modelsummary::msummary(   models = list(m1, m2, m3, m4, m5),    stars = TRUE,    gof_map = c(\"nobs\", \"aic\", \"bic\"),   notes = \"Models 1-2 don't include offset term. Model 5 is correctly specified.\",    title = \"Complete Risk Set\",    output = \"gt\" ) |> gt::opt_table_font(\"Avenir Next\")"},{"path":"https://acastroaraujo.github.io/seaR/articles/02-tutorial.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"Tutorial","text":": Add origin story data.","code":"dplyr::glimpse(teams) #> Rows: 816 #> Columns: 14 #> $ mr_id     <dbl> 2, 3, 6, 7, 13, 15, 17, 19, 22, 26, 27, 29, 33, 35, 36, 42, … #> $ teamtot   <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ q217_1    <chr> \"MALE\", \"MALE\", \"MALE\", \"MALE\", \"FEMALE\", \"FEMALE\", \"MALE\", … #> $ q217_2    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ q217_3    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ q217_4    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ q217_5    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ wtw1      <dbl> 1.2024329, 0.9746501, 1.2024329, 1.2024329, 0.6153474, 0.694… #> $ men       <dbl> 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, … #> $ women     <dbl> 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, … #> $ allmale   <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ allfemale <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ spouse    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ autonomy  <dbl> 1, 1, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4, 1, 3, 1, 1, 1, …"},{"path":"https://acastroaraujo.github.io/seaR/articles/02-tutorial.html","id":"reshaping-data","dir":"Articles","previous_headings":"Data","what":"Reshaping data","title":"Tutorial","text":"Step 1. Get original data right shape (including creation .id variable). Note use survey weights. Step 2. Get risk set. risk set half size interested whether spouses present groups . Step 3. Remove structural zeroes (.e., groups size 1 spouse = 1). Step 4. Merge risk set real data. risk set 38 structural events, 28 data. idea merge missing values n replaced zeroes. Step 5. Add additional homophily size_one variables. also created y variable rounds weighted counts (n). Step 6. Calculate event probabilities Step 7. probabilities quite right taken account probabilities spouse group. haven’t figured way properly, way modify event_probs future deal !","code":"library(tidyverse) theme_set(theme_light(base_family = \"Optima\")) teams <- teams |>    ## Replace gender role names with first letter (i.e., M, F, N)   mutate(across(starts_with(\"q217\"), \\(x) substr(x, start = 1, stop = 1))) |>    ## Ignore non-persons   mutate(across(starts_with(\"q217\"), \\(x) ifelse(x == \"N\", NA, x))) |>    ## Create unique SE id   mutate(.id = sort_collapse(q217_1, q217_2, q217_3, q217_4, q217_5)) |>    ## move id variable to beginning of data frame   relocate(.id)  d <- teams |>    count(.id, spouse, wt = wtw1)   print(d, n = Inf) #> # A tibble: 28 × 3 #>    .id       spouse       n #>    <chr>      <dbl>   <dbl> #>  1 F              0 166.    #>  2 F|F            0  26.6   #>  3 F|F|F          0   2.35  #>  4 F|F|F|F        0   0.615 #>  5 F|F|F|F|F      0   0.704 #>  6 F|F|F|M        0   2.02  #>  7 F|F|F|M        1   1.73  #>  8 F|F|F|M|M      1   2.95  #>  9 F|F|M          0   2.72  #> 10 F|F|M          1   3.80  #> 11 F|F|M|M        0   2.10  #> 12 F|F|M|M        1   6.60  #> 13 F|F|M|M|M      0   1.84  #> 14 F|F|M|M|M      1   2.01  #> 15 F|M            0  19.5   #> 16 F|M            1 191.    #> 17 F|M|M          0  10.7   #> 18 F|M|M          1   6.98  #> 19 F|M|M|M        0   2.09  #> 20 F|M|M|M        1   7.05  #> 21 F|M|M|M|M      0   4.26  #> 22 F|M|M|M|M      1   1.46  #> 23 M              0 228.    #> 24 M|M            0  72.4   #> 25 M|M            1   2.09  #> 26 M|M|M          0  28.4   #> 27 M|M|M|M        0   8.54  #> 28 M|M|M|M|M      0  10.1 gender <- c(\"M\", \"F\") rs <- risk_set(1:5, gender)  rs #> # A tibble: 20 × 2 #>    .id       .size #>  * <chr>     <int> #>  1 M             1 #>  2 F             1 #>  3 M|M           2 #>  4 F|M           2 #>  5 F|F           2 #>  6 M|M|M         3 #>  7 F|M|M         3 #>  8 F|F|M         3 #>  9 F|F|F         3 #> 10 M|M|M|M       4 #> 11 F|M|M|M       4 #> 12 F|F|M|M       4 #> 13 F|F|F|M       4 #> 14 F|F|F|F       4 #> 15 M|M|M|M|M     5 #> 16 F|M|M|M|M     5 #> 17 F|F|M|M|M     5 #> 18 F|F|F|M|M     5 #> 19 F|F|F|F|M     5 #> 20 F|F|F|F|F     5 rs <- rs |>    mutate(spouse = list(c(0L, 1L))) |>    unnest(spouse)  glimpse(rs) #> Rows: 40 #> Columns: 3 #> $ .id    <chr> \"M\", \"M\", \"F\", \"F\", \"M|M\", \"M|M\", \"F|M\", \"F|M\", \"F|F\", \"F|F\", \"… #> $ .size  <int> 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, … #> $ spouse <int> 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, … rs <- rs |>    filter(!(.size == 1 & spouse == 1)) d <- rs |>    full_join(d) |>    mutate(n = replace_na(n, 0L))  #> Joining with `by = join_by(.id, spouse)` d <- d |>    mutate(homophily = is_homophily(.id)) |>    mutate(y = round(n)) |>   mutate(size_one = as.integer(.size == 1L))   d #> # A tibble: 38 × 7 #>    .id   .size spouse      n homophily     y size_one #>    <chr> <int>  <dbl>  <dbl>     <int> <dbl>    <int> #>  1 M         1      0 228.           0   228        1 #>  2 F         1      0 166.           0   166        1 #>  3 M|M       2      0  72.4          1    72        0 #>  4 M|M       2      1   2.09         1     2        0 #>  5 F|M       2      0  19.5          0    19        0 #>  6 F|M       2      1 191.           0   191        0 #>  7 F|F       2      0  26.6          1    27        0 #>  8 F|F       2      1   0            1     0        0 #>  9 M|M|M     3      0  28.4          1    28        0 #> 10 M|M|M     3      1   0            1     0        0 #> # ℹ 28 more rows d$lp <- event_probs(d, identities = c(\"M\", \"F\"), log = TRUE) attr(d$lp, \"identities_prob\")  #>         M         F  #> 0.6246938 0.3753062 d <- d |>    group_by(.size) |>   mutate(lp = unclass(lp)) |>    mutate(lp = case_when(     .size == 1 ~ lp,     .size > 1 & spouse == 0 ~ lp + log(sum((spouse == 0) * n ) / sum(n)),     .size > 1 & spouse == 1 ~ lp + log(sum((spouse == 1) * n ) / sum(n))   )) |>    ungroup()  d |> ## sanity check, all conditional probabilities should sum up to one   summarize(p = exp(log_sum_exp(lp)), .by = .size)  #> # A tibble: 5 × 2 #>   .size     p #>   <int> <dbl> #> 1     1     1 #> 2     2     1 #> 3     3     1 #> 4     4     1 #> 5     5     1"},{"path":"https://acastroaraujo.github.io/seaR/articles/02-tutorial.html","id":"expected-counts","dir":"Articles","previous_headings":"Data","what":"Expected counts","title":"Tutorial","text":"","code":"d |>    mutate(expected = exp(lp) * sum(y), .by = .size) |>    select(.id, spouse, y, expected) |>    arrange(spouse) |>    gt::gt(rowname_col = \".id\") |>    gt::fmt_number(decimals = 1) |>    gt::opt_table_font(\"Optima\")"},{"path":"https://acastroaraujo.github.io/seaR/articles/02-tutorial.html","id":"models-1-4","dir":"Articles","previous_headings":"Data","what":"Models 1-4","title":"Tutorial","text":"following code sort--replicates Table 4 Ruef, Aldrich, Carter (2003, 209). account teams size 4 5 two spouses, adds 11 structural events.","code":"d <- d |>    mutate(size_category = factor(.size))  mod1 <- glm(y ~ size_category, data = d, family = poisson(\"log\"), offset = lp) mod2 <- update(mod1, y ~ .size) mod3 <- update(mod1, y ~ size_one + .size + homophily) mod4 <- update(mod1, y ~ size_one + .size + homophily*spouse) cm <- c(   \"(Intercept)\" = \"(Intercept)\",   \".size\" = \"Team Size\",   \"size_one\" = \"Size Category [1]\",   \"size_category2\" = \"Size Category [2]\",   \"size_category3\" = \"Size Category [3]\",   \"size_category4\" = \"Size Category [4]\",   \"size_category5\" = \"Size Category [5]\",   \"homophily\" = \"Gender Homophily\",   \"homophily:spouse\" = \"Partners/spouse × \\nGender Homophily\" )  modelsummary::msummary(   list(\"Model 1\" = mod1, \"Model 2\" = mod2, \"Model 3\" = mod3, \"Model 4\" = mod4),    coef_map = cm,   stars = TRUE,   gof_map = c(\"nobs\", \"aic\", \"bic\"),   output = \"gt\" ) |> gt::opt_table_font(\"Optima\")"},{"path":[]},{"path":"https://acastroaraujo.github.io/seaR/articles/03-definitions.html","id":"structural-event","dir":"Articles","previous_headings":"","what":"Structural Event","title":"Definitions","text":"term “structure” means combination basic actors (identities roles), strict bound number actors. term “event” used meaning random event probability theory—.e., well-defined subset sample space. Suppose two gender roles (F, M), three occupational roles (, B, C), group sizes ranging 1 10. upper limit?","code":"gender <- c(\"F\", \"M\") occupation <- c(\"A\", \"B\", \"C\")  risk_set_size(1:5, gender, occupation) #> Total: 461 #>   1   2   3   4   5  #>   6  21  56 126 252"},{"path":"https://acastroaraujo.github.io/seaR/articles/03-definitions.html","id":"risk-set","dir":"Articles","previous_headings":"","what":"Risk Set","title":"Definitions","text":"risk set \\(s(H)\\) structural event enumerates possible combinations set roles \\((N)\\), subject group size \\((r)\\) restrictions permissible role combinations. number combinations multiset N roles calculated : \\[ s(H) = \\sum_{r = 1}^{r(H)} {r + |N| -1 \\choose r } = \\sum_{r = 1}^{r(H)} \\frac{(r + |N| -1)!}{r! (|N| -1)!} \\] Note. simply standard way calculating number possible samples size \\(r\\) population size \\(|N|\\), assuming looking unordered samples replacement, summing possible values \\(r\\). example, two gender roles (F, M) four occupational roles (, B, C, D), following risk set:","code":"gender <- c(\"F\", \"M\") occupation <- c(\"A\", \"B\", \"C\") rs <- risk_set(1:2, gender, occupation) glimpse(rs) #> Rows: 27 #> Columns: 2 #> $ .id   <chr> \"FA\", \"MA\", \"FB\", \"MB\", \"FC\", \"MC\", \"FA|FA\", \"FA|MA\", \"FA|FB\", \"… #> $ .size <int> 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2… tibble::deframe(rs) #>    FA    MA    FB    MB    FC    MC FA|FA FA|MA FA|FB FA|MB FA|FC FA|MC MA|MA  #>     1     1     1     1     1     1     2     2     2     2     2     2     2  #> FB|MA MA|MB FC|MA MA|MC FB|FB FB|MB FB|FC FB|MC MB|MB FC|MB MB|MC FC|FC FC|MC  #>     2     2     2     2     2     2     2     2     2     2     2     2     2  #> MC|MC  #>     2"},{"path":"https://acastroaraujo.github.io/seaR/articles/03-definitions.html","id":"structural-zeroes","dir":"Articles","previous_headings":"","what":"Structural Zeroes","title":"Definitions","text":"“priori restrictions imposed role combinations (instance, women given society allowed hold certain occupations), role set must reduced accordingly” (Ruef et al. 2003, p. 219). can filtering rs data frame. example, happens case M legally allowed C occupation:","code":"rs_restricted <- rs |>   filter(!grepl(.id, pattern = \"MC\"))    rs_restricted #> # A tibble: 20 × 2 #>    .id   .size #>    <chr> <int> #>  1 FA        1 #>  2 MA        1 #>  3 FB        1 #>  4 MB        1 #>  5 FC        1 #>  6 FA|FA     2 #>  7 FA|MA     2 #>  8 FA|FB     2 #>  9 FA|MB     2 #> 10 FA|FC     2 #> 11 MA|MA     2 #> 12 FB|MA     2 #> 13 MA|MB     2 #> 14 FC|MA     2 #> 15 FB|FB     2 #> 16 FB|MB     2 #> 17 FB|FC     2 #> 18 MB|MB     2 #> 19 FC|MB     2 #> 20 FC|FC     2"},{"path":"https://acastroaraujo.github.io/seaR/articles/03-definitions.html","id":"event-probability","dir":"Articles","previous_headings":"","what":"Event Probability","title":"Definitions","text":"structural events drawn population entrepreneurs 40 percent manual, 30 percent service, 30 percent professional, expected probability obtaining three member founding team one manual worker two service sector workers assumption statistical independence \\(\\Pr(E \\mid 3) = \\frac{3!}{2! \\times 1!} (.4^1 \\times .3^2 \\times .3^0) = .108\\). event probability reflects fact three different ways draw participants. comparison, probability obtaining three-member team consists manual workers \\(\\Pr(E \\mid 3) = \\frac{3!}{3!} (.4^3 \\times .3^0 \\times .3^0) = .064\\).","code":"probs <- c(\"M\" = .4, \"S\" = .3, \"P\" = .3)  dmultinom(x = c(1, 2, 0), prob = probs) #> [1] 0.108 dmultinom(x = c(3, 0, 0), prob = probs) #> [1] 0.064"},{"path":[]},{"path":"https://acastroaraujo.github.io/seaR/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Andrés Castro Araújo. Author, maintainer.","code":""},{"path":"https://acastroaraujo.github.io/seaR/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Castro Araújo (2024). seaR: Structural Event Analysis. R package version 0.0.0.9000, https://acastroaraujo.github.io/seaR/, https://github.com/acastroaraujo/seaR.","code":"@Manual{,   title = {seaR: Structural Event Analysis},   author = {Andrés {Castro Araújo}},   year = {2024},   note = {R package version 0.0.0.9000, https://acastroaraujo.github.io/seaR/},   url = {https://github.com/acastroaraujo/seaR}, }"},{"path":"https://acastroaraujo.github.io/seaR/index.html","id":"structural-event-analysis-","dir":"","previous_headings":"","what":"Structural Event Analysis","title":"Structural Event Analysis","text":"objective structural event analysis model number groups matching set compositional characteristics, considering possible groups (just actually form).","code":""},{"path":"https://acastroaraujo.github.io/seaR/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Structural Event Analysis","text":"can install development version seaR GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"acastroaraujo/seaR\")"},{"path":[]},{"path":"https://acastroaraujo.github.io/seaR/reference/H.html","id":null,"dir":"Reference","previous_headings":"","what":"Shannon Index of Diversity — H","title":"Shannon Index of Diversity — H","text":"Shannon Index Diversity","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/H.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shannon Index of Diversity — H","text":"","code":"H(data, identities)"},{"path":"https://acastroaraujo.github.io/seaR/reference/H.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Shannon Index of Diversity — H","text":"data data frame .id column identities vector identity names","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/H.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Shannon Index of Diversity — H","text":"vector diversity indicators (entropies)","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/event_probs.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract probabilities from data frame and risk set — event_probs","title":"Extract probabilities from data frame and risk set — event_probs","text":"Extract probabilities data frame risk set","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/event_probs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract probabilities from data frame and risk set — event_probs","text":"","code":"event_probs(data, identities, probs = NULL, log = FALSE)"},{"path":"https://acastroaraujo.github.io/seaR/reference/event_probs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract probabilities from data frame and risk set — event_probs","text":"data data frame identities identities risk set probs external vector probabilities (optional) log logical; TRUE, probabilities p given log(p).","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/event_probs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract probabilities from data frame and risk set — event_probs","text":"vector conditional probabilities (log-probabilities)","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/get_identities.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Identities from risk set object — get_identities","title":"Extract Identities from risk set object — get_identities","text":"Extract Identities risk set object","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/get_identities.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Identities from risk set object — get_identities","text":"","code":"get_identities(rs)"},{"path":"https://acastroaraujo.github.io/seaR/reference/get_identities.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Identities from risk set object — get_identities","text":"rs risk set object","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/get_identities.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Identities from risk set object — get_identities","text":"character vector","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/log_sum_exp.html","id":null,"dir":"Reference","previous_headings":"","what":"Numerically stable computation of log sums of exponentiated values. — log_sum_exp","title":"Numerically stable computation of log sums of exponentiated values. — log_sum_exp","text":"helps avoid rounding errors occur working direct probabilities.","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/log_sum_exp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Numerically stable computation of log sums of exponentiated values. — log_sum_exp","text":"","code":"log_sum_exp(x)"},{"path":"https://acastroaraujo.github.io/seaR/reference/log_sum_exp.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Numerically stable computation of log sums of exponentiated values. — log_sum_exp","text":"Taken Richard McElreath's rethinking package","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/log_sum_exp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Numerically stable computation of log sums of exponentiated values. — log_sum_exp","text":"x vector values","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/log_sum_exp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Numerically stable computation of log sums of exponentiated values. — log_sum_exp","text":"scalar","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/risk_set.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Risk Set — risk_set","title":"Calculate Risk Set — risk_set","text":"Calculate Risk Set Risk Set Sizes","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/risk_set.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Risk Set — risk_set","text":"","code":"risk_set(size, ..., sep = \"|\")  risk_set_size(size, ...)"},{"path":"https://acastroaraujo.github.io/seaR/reference/risk_set.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Risk Set — risk_set","text":"size numeric vector ... vectors identities sep string","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/risk_set.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Risk Set — risk_set","text":"risk set data frame vector sizes","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/sort_collapse.html","id":null,"dir":"Reference","previous_headings":"","what":"Sort + Collapse — sort_collapse","title":"Sort + Collapse — sort_collapse","text":"functions takes set character variables collapses one unique identifier appropriate sorting. resulting id correspond one produced risk_set()","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/sort_collapse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sort + Collapse — sort_collapse","text":"","code":"sort_collapse(..., sep = \"|\")"},{"path":"https://acastroaraujo.github.io/seaR/reference/sort_collapse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sort + Collapse — sort_collapse","text":"... set variables sep defaults \"|\"","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/sort_collapse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sort + Collapse — sort_collapse","text":"new id variable","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/teams.html","id":null,"dir":"Reference","previous_headings":"","what":"Teams — teams","title":"Teams — teams","text":"subset data ...","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/teams.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Teams — teams","text":"","code":"teams"},{"path":"https://acastroaraujo.github.io/seaR/reference/teams.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Teams — teams","text":"object class tbl_df (inherits tbl, data.frame) 816 rows 14 columns.","code":""},{"path":"https://acastroaraujo.github.io/seaR/reference/teams.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Teams — teams","text":"Martin","code":""}]
